{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <h1 class="text-center mb-4">Control Panel</h1>

    <div class="row">
        <!-- LED Controls -->
        <div class="col-md-6 mb-4">
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white text-center">
                    <h5>LED Control</h5>
                </div>
                <div class="card-body text-center">
                    <button id="led-on" class="btn btn-success btn-lg mr-3">Turn ON LEDs</button>
                    <button id="led-off" class="btn btn-danger btn-lg">Turn OFF LEDs</button>
                </div>
            </div>
        </div>

        <!-- Valve Controls -->
        <div class="col-md-6 mb-4">
            <div class="card shadow-sm">
                <div class="card-header bg-info text-white text-center">
                    <h5>Valve Control</h5>
                </div>
                <div class="card-body text-center">
                    <button id="valve-open" class="btn btn-success btn-lg mr-3">Open Valve</button>
                    <button id="valve-close" class="btn btn-danger btn-lg">Close Valve</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // LED Control
    document.getElementById('led-on').addEventListener('click', () => {
        fetch('/api/led-control', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ command: 'on' })
        }).then(response => response.json()).then(data => alert(data.message));
    });

    document.getElementById('led-off').addEventListener('click', () => {
        fetch('/api/led-control', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ command: 'off' })
        }).then(response => response.json()).then(data => alert(data.message));
    });

    // Valve Control
    document.getElementById('valve-open').addEventListener('click', () => {
        fetch('/api/valve-control', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ command: 'open' })
        }).then(response => response.json()).then(data => alert(data.message));
    });

    document.getElementById('valve-close').addEventListener('click', () => {
        fetch('/api/valve-control', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ command: 'close' })
        }).then(response => response.json()).then(data => alert(data.message));
    });
</script>
{% endblock %}
